#!/usr/bin/env perl
use strict;
use warnings;

my $number  = shift || die "Usage: perl $0 number m|h|d|w|M|Q|Y m|h|d|w|M|Q|Y use_wks use_qtr\n";
my $from    = shift || 's';
my $to      = shift || 'Y';
my $use_wks = shift // 0;
my $use_qtr = shift // 0;

my $minutes  = 60; # seconds
my $hours    = 60; # minutes
my $days     = 24; # hours
my $weeks    = 7;  # days
my $months   = $use_wks ? 4 : 30;  # weeks or days
my $quarters = 3;  # months
my $years    = $use_qtr ? 4 : 12;  # quarters or months

my $s = 0;
my $m = 0;
my $h = 0;
my $d = 0;
my $w = 0;
my $M = 0;
my $Q = 0;
my $Y = 0;

if ( $from eq 's' ) {
    $s = $number;
}
elsif ( $from eq 'm' ) {
    $m = $number;
}
elsif ( $from eq 'h' ) {
    $h = $number;
}
elsif ( $from eq 'd' ) {
    $d = $number;
}
elsif ( $from eq 'w' ) {
    $w = $number;
}
elsif ( $from eq 'M' ) {
    $M = $number;
}
elsif ( $from eq 'Q' ) {
    $Q = $number;
}
elsif ( $from eq 'Y' ) {
    $Y = $number;
}

if ( $from eq 's' ) {
print "$s s\n";
if ( $s >= $minutes ) {
    ( $m, $s ) = int_rem( $s, $minutes );
}
print "$m m $s s\n";
exit if $to eq 'm';
}

if ( grep { $from eq $_ } qw( s m ) ) {
if ( $m >= $hours ) {
    ( $h, $m ) = int_rem( $m, $hours );
}
print "$h h $m m $s s\n";
exit if $to eq 'h';
}

if ( grep { $from eq $_ } qw( s m h ) ) {
if ( $h >= $days ) {
    ( $d, $h ) = int_rem( $h, $days );
}
print "$d d $h h $m m $s s\n";
exit if $to eq 'd';
}

if ( $use_wks ) {
if ( grep { $from eq $_ } qw( s m h d ) ) {
    if ( $d >= $weeks ) {
        ( $w, $d ) = int_rem( $d, $weeks );
    }
    print "$w w $d d $h h $m m $s s\n";
    exit if $to eq 'w';
}

if ( grep { $from eq $_ } qw( s m h d w ) ) {
    if ( $w >= $months ) {
        ( $M, $w ) = int_rem( $w, $months );
    }
    print "$M M $w w $d d $h h $m m $s s\n";
    exit if $to eq 'M';
}
}
else {
if ( grep { $from eq $_ } qw( s m h d ) ) {
    if ( $d >= $months ) {
        ( $M, $d ) = int_rem( $d, $months );
    }
    print "$M M $d d $h h $m m $s s\n";
    exit if $to eq 'M';
}
}

if ( $use_qtr ) {
if ( grep { $from eq $_ } qw( s m h d w M ) ) {
    if ( $M >= $quarters ) {
        ( $Q, $M ) = int_rem( $M, $quarters );
    }
    print "$Q Q $M M $w w $d d $h h $m m $s s\n";
    exit if $to eq 'Q';
}

if ( grep { $from eq $_ } qw( s m h d w M Q ) ) {
    if ( $Q >= $years ) {
        ( $Y, $Q ) = int_rem( $Q, $years );
    }
    print "$Y Y $Q Q $M M $w w $d d $h h $m m $s s\n";
    exit if $to eq 'Y';
}
}
else {
if ( grep { $from eq $_ } qw( s m h d w M ) ) {
    if ( $M >= $years ) {
        ( $Y, $M ) = int_rem( $M, $years );
    }
    print "$Y Y $M M $w w $d d $h h $m m $s s\n";
    exit if $to eq 'Y';
}
}

sub int_rem {
    my ( $frame, $factor ) = @_;

    my $integer = int $frame / $factor;

    my $remainder = $frame % $factor;

    return $integer, $remainder;
}
